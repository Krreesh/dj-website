import {Injectable} from '@angular/core';
import {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse} from '@angular/common/http';
import {Observable, of} from 'rxjs';
import {environment} from '../../../environments/environment';

@Injectable()
export class BookHttpInterceptor implements HttpInterceptor {
  private readonly apiUrl = 'https://www.dieterjordens.com/api/books';

  intercept(httpRequest: HttpRequest<any>, httpHandler: HttpHandler): Observable<HttpEvent<any>> {
    if(!environment.production){
      console.log('Intercepted request: ' + httpRequest.url);
      if (httpRequest.url === this.apiUrl) {
        return of(new HttpResponse({
          status: 200, body: JSON.parse(`[{"isbn":9780060555665,"title":"The Intelligent Investor","authors":"Benjamin Graham","yearRead":2022,"rating":2.5},{"isbn":9780273714842,"title":"Brilliant Networking","authors":"Steven D'Souza","yearRead":2021,"rating":3.0},{"isbn":9780132980937,"title":"How to Argue - Powerfully, Persuasively, Positively","authors":"Jonathan Herring","yearRead":2021,"rating":4.5},{"isbn":9781119335573,"title":"Public Speaking Skills","authors":"Alyson Connolly","yearRead":2021,"rating":3.0},{"isbn":9781594865596,"title":"The Six Keys to Unlock and Empower Your Mind","authors":"Marc Salem","yearRead":2021,"rating":3.0},{"isbn":9780134494166,"title":"Clean Architecture: A Craftsman's Guide to Software Structure and Design","authors":"Robert C. Martin","yearRead":2020,"rating":3.5},{"isbn":9780321125217,"title":"Domain-Driven Design: Tackling Complexity in the Heart of Software","authors":"Eric Evans","yearRead":2020,"rating":3.0},{"isbn":9781617292392,"title":"Soft Skills: The software developer's life manual","authors":"John Sonmez","yearRead":2020,"rating":4.5},{"isbn":9780134052502,"title":"The Software Craftsman: Professionalism, Pragmatism, Pride","authors":"Sandro Mancuso","yearRead":2020,"rating":4.5},{"isbn":9780062803832,"title":"Unfu*k Yourself: Get Out of Your Head and Into Your Life","authors":"Bishop, Gary John","yearRead":2020,"rating":5.0},{"isbn":9780131177055,"title":"Working Effectively with Legacy Code","authors":"Michael C. Feathers","yearRead":2020,"rating":3.5},{"isbn":9780132350884,"title":"Clean Code: A Handbook of Agile Software Craftsmanship","authors":"Robert C. Martin","yearRead":2019,"rating":4.0},{"isbn":9780134685991,"title":"Effective Java: A Programming Language Guide","authors":"Joshua Bloch","yearRead":2019,"rating":3.5},{"isbn":9781491954164,"title":"Java 9 Modularity: Patterns and practices for developing maintainable applications","authors":"Sander Mak and Paul Baker","yearRead":2019,"rating":3.5},{"isbn":9781546376231,"title":"Ng-book: the complete book on Angular","authors":"Nathan Murray, Felipe Coury, Ari Lerner and Carlos Taborda","yearRead":2019,"rating":3.5},{"isbn":9781119067900,"title":"Oracle Certified Professional Java SE 8 Programmer II Study Guide","authors":"Jeanne Boyarsky and Scott Selikoff","yearRead":2019,"rating":3.0},{"isbn":9781934356340,"title":"The Passionate Programmer: Creating a Remarkable Career in Software Development","authors":"Chad Fowler","yearRead":2019,"rating":4.0},{"isbn":9781451639612,"title":"7 Habits of highly effective people","authors":"Stephen Covey","yearRead":2018,"rating":3.5},{"isbn":9781491925614,"title":"Fundamentals of Deep Learning","authors":"Nicholas Locascio and Nikhil Buduma","yearRead":2018,"rating":3.0},{"isbn":9780143124047,"title":"How to create a mind: The Secret of Human Thought Revealed","authors":"Ray Kurzweil","yearRead":2018,"rating":4.0},{"isbn":9780671027032,"title":"How to win friends and influence people","authors":"Dale Carnegie","yearRead":2018,"rating":4.5},{"isbn":9780137081073,"title":"The Clean Coder: A code of Conduct for Professional Programmers","authors":"Robert C. Martin","yearRead":2018,"rating":4.5},{"isbn":9781449344856,"title":"AngularJS","authors":"Brad Green and Shyam Seshadri","yearRead":2017,"rating":2.0},{"isbn":9780987467485,"title":"HTML5 & CSS3 For The Real World","authors":"Alexis Goldstein, Estelle Weyl and Louis Lazaris","yearRead":2017,"rating":3.0},{"isbn":9781617290459,"title":"Java Persistence with Hibernate","authors":"Cornelis Bauer and Gavin King","yearRead":2017,"rating":3.0},{"isbn":9781617291203,"title":"Spring in Action","authors":"Craig Walls","yearRead":2017,"rating":2.0},{"isbn":9780321579362,"title":"Succeeding with Agile: Software Development Using Scrum","authors":"Mike Cohn","yearRead":2017,"rating":4.0},{"isbn":9780596007126,"title":"Head First Design Patterns: A Brain-Friendly Guide","authors":"Elisabeth Freeman and Kathy Sierra","yearRead":2016,"rating":4.5},{"isbn":9781935182023,"title":"JUnit in Action","authors":"Ted Husted and Vincent Massol","yearRead":2016,"rating":3.5},{"isbn":9781783982509,"title":"Mastering Unit Testing Using Mockito, JUnit","authors":"Sujoy Acharya","yearRead":2016,"rating":3.5},{"isbn":9781118957400,"title":"Oracle Certified Associate Java SE 8 Programmer I Study Guide","authors":"Jeanne Boyarsky and Scott Selikoff","yearRead":2016,"rating":4.5},{"isbn":9780982866917,"title":"The Elements of Scrum","authors":"Christopher A. Sims and Hillary Louise Johnson","yearRead":2016,"rating":4.0}]`)
        }));
      }
    }
    return httpHandler.handle(httpRequest);
  }
}
